"use strict";function AddRoll(a,b,c,d){var e=this;this.rolls=[],this.add=function(a,b,c,d){e.rolls.push(new AddRoll(a,b,c,d))},this.title=d||"Title",this.number=a||1,this.sizeOfDice=b||6,this.addValue=c||0,this.__type__="AddRoll",this.rollDice=function(a){for(var b=a||this,c=0,d=[],e=0;e<b.number;e++){var f=Math.floor(Math.random()*b.sizeOfDice)+1;c+=f,d.push(f)}return b.results=d,b.result=c+b.addValue,b},this.remove=function(a){e.rolls.splice(a,1)},this.get=function(a){return e.rolls[a]},this.print=function(){console.log(e.serialize())},this.serialize=function(){return JSON.stringify(e.rolls)},this.deserialize=function(a){var b=function(a,b){return b.hasOwnProperty("__type__")&&"AddRoll"===b.__type__?new AddRoll(b.number,b.sizeOfDice,b.addValue,b.title):b};return e.rolls=JSON.parse(a,b),e.rolls},this.reset=function(){e.rolls=[]}}function Collapser(){var a=this,b=!1,c=!1;this.toggle=function(){return a.isHeld()?void 0:b=!b},this.isOpen=function(){return b===!0},this.isClosed=function(){return b===!1},this.close=function(){return a.isHeld()?void 0:b=!1},this.open=function(){a.isHeld()||(b=!0)},this.hold=function(){return c=!0},this.release=function(){return c=!1},this.isHeld=function(){return c===!0},this.holdToggle=function(){return c=!c}}function CollapseProvider(){var a={};this.Collapser=new Collapser;var b=this;this.add=function(b){var c=new Collapser;return a[b]=c,c},this.remove=function(b){return delete a[b]},this.get=function(b){return a[b]},this.every=function(b,c){return b?(c?a.keys.filter(function(a){return a!==c}).forEach(function(c){b.call(a[c])}):a.keys.map(function(c){b.call(a[c])}),!0):!1},this.release=function(a){return b.every(b.Collapser.release,a)},this.hold=function(a){return b.every(b.Collapser.hold,a)},this.close=function(){return b.every(b.Collapser.close,name)},this.open=function(){return b.every(b.Collapser.open,name)}}var learning=angular.module("learningApp",["ngRoute","ngSanitize","controllers","ngTouch","services","Collapse"]);learning.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("controllers",["LocalStorageModule","ui.bootstrap","ngMaterial"]),angular.module("controllers").controller("MainCtrl",["$scope","Roll","localStorageService",function(a,b,c){a.reset=function(){c.remove("rolls"),b.reset(),b.add(2,8,1,"Example: 2d8+1")};var d=c.get("rolls");d&&b.deserialize(JSON.stringify(d)),(!angular.isArray(b.rolls)||b.rolls.length<1)&&a.reset(),a.Roll=b,a.rolls=b.rolls,a.update=function(){c.set("rolls",b.serialize())},a.$watch("rolls",a.update,!0),a.addCollapse=!0,a.AddRolls=[{label:"Roller Title","class":!1,id:"title",model:"setTitle",placeholder:"Title",type:"text"},{label:"Number of Dice","class":!1,id:"numberOfDice",model:"numDice",placeholder:"1",type:"number"},{label:"Size of Die","class":!1,id:"sizeOfDie",model:"sizeOfDie",placeholder:"6",type:"number"},{label:"Bonus / Penalty to Roll Result","class":!1,id:"amountToAdd",model:"amountToAdd",placeholder:"0",type:"number"}]}]);var services=angular.module("services",[]);services.factory("Roll",[function(){return new AddRoll}]);var collapse=angular.module("Collapse",[]);collapse.factory("CollapseProvider",function(){return new CollapseProvider});