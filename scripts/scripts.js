"use strict";var learning=angular.module("learningApp",["ngRoute","ngSanitize","services","controllers","ngTouch"]);learning.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("controllers",["LocalStorageModule","ui.bootstrap","ngMaterial"]),angular.module("controllers").controller("MainCtrl",["$scope","Roll","localStorageService","CollapseProvider",function(a,b,c,d){a.reset=function(){c.remove("rolls"),b.reset(),b.add(2,8,1,"Example: 2d8+1")};var e=c.get("rolls");e&&b.deserialize(JSON.stringify(e)),(!angular.isArray(b.rolls)||b.rolls.length<1)&&a.reset(),a.Roll=b,a.rolls=b.rolls,a.update=function(){c.set("rolls",b.serialize())},a.$watch("rolls",a.update,!0),a.AddRolls=[{label:"Roller Title","class":!1,id:"title",model:"setTitle",placeholder:"Title",type:"text"},{label:"Number of Dice","class":!1,id:"numberOfDice",model:"numDice",placeholder:"1",type:"number"},{label:"Size of Die","class":!1,id:"sizeOfDie",model:"sizeOfDie",placeholder:"6",type:"number"},{label:"Bonus / Penalty to Roll Result","class":!1,id:"amountToAdd",model:"amountToAdd",placeholder:"0",type:"number"}],a.addCollapse=d.add("addCollapse")}]),angular.module("services",[]),angular.module("services").factory("Roll",[function(){function a(b,c,d,e){var f=this;this.rolls=[],this.add=function(b,c,d,e){f.rolls.push(new a(b,c,d,e))},this.title=e||"Title",this.number=b||1,this.sizeOfDice=c||6,this.addValue=d||0,this.__type__="AddRoll",this.rollDice=function(a){for(var b=a||this,c=0,d=[],e=0;e<b.number;e++){var f=Math.floor(Math.random()*b.sizeOfDice)+1;c+=f,d.push(f)}return b.results=d,b.result=c+b.addValue,b},this.remove=function(a){f.rolls.splice(a,1)},this.get=function(a){return f.rolls[a]},this.print=function(){console.log(f.serialize())},this.serialize=function(){return JSON.stringify(f.rolls)},this.deserialize=function(b){var c=function(b,c){return c.hasOwnProperty("__type__")&&"AddRoll"===c.__type__?new a(c.number,c.sizeOfDice,c.addValue,c.title):c};return f.rolls=JSON.parse(b,c),f.rolls},this.reset=function(){f.rolls=[]}}return new a}]),angular.module("services").factory("CollapseProvider",[function(){function a(a){var b=this;b.name=a,b.Collapsed=!0,b.holdOpen=!1,this.collapseToggle=function(){(!b.holdOpen||b.Collapsed)&&(b.Collapsed=!b.Collapsed)},this.holdToggle=function(){return b.holdOpen=!b.holdOpen,b.holdOpen}}function b(){var b=this;b.hash={},this.add=function(c){if(!c)return!1;var d=new a(c);return b.hash[c]=d,d},this.remove=function(a){return delete b.hash[a]},this.get=function(a){return b.hash[a]},this.exists=function(a){return a?b.hash.hasOwnProperty(a):!1},this.every=function(a){return a?void(angular.isFunction(Object.keys(b.hash)[0][a])&&Object.keys(b.hash).forEach(function(c){b.hash[c][a]()})):!1},this.turnOn=function(a){return b.exists(a)?(b.every(close),b.get(a).open(),!0):!1},this.turnOff=function(a){return b.exists(a)?(b.every(open),b.get(a).close(),!0):!1},this.reset=function(){b.hash={}}}return new b}]);